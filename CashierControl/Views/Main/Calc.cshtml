@model CashierControl.Models.Report

@{
    ViewData["Title"] = "Calc";
}

<br></br>
<br></br>
<!-- Start Landing Page -->
<br></br>
<div class="row justify-content-center align-items-center">
    <div class="col-md-6">
        <form id="registerForm" method="post" asp-action="Calc">
            <h3 class="text-center">Calcular boleto</h3>
            <hr />
            <div asp-validation-summary="ModelOnly" class="text-danger" role="alert"></div>

            <div class="form-floating mb-3">
                <input asp-for="BankSlipValue" class="form-control" id="ValorBoleto" asp-for="BankSlipValue" autocomplete="username" aria-required="true" type="number" />
                <label asp-for="BankSlipValue">Valor do boleto</label>
                <span class="text-danger"></span>
            </div>

            <div class="form-floating mb-3">
                <input class="form-control" id="ValorPago" autocomplete="username" aria-required="true" type="number" />
                <label asp-for="ClientAmount">Valor pago pelo cliente</label>
                <span class="text-danger"></span>
            </div>

            <div class="form-floating mb-3">
                <select asp-for="Operation" class="form-select" aria-label="Default select example">
                    <option value="Não informado">Selecione a operação</option>
                    <option value="Saque">Saque</option>
                    <option value="Deposito">Deposito</option>
                    <option value="Pagamento">Pagamento</option>
                </select>
                <label>Operação</label>
                <span class="text-danger"></span>
            </div>

            <div class="form-floating mb-3">
                <input class="form-control" id="TrocoCliente" autocomplete="username" aria-required="true" type="number" disabled />
                <label>Troco do cliente</label>
                <span class="text-danger"></span>
            </div>

            <button id="calcularSubmit" type="button" class="w-100 btn btn-outline-purple" onclick="calcularTroco()">Calcular</button>

            <button id="salvarSubmit" type="submit" class="w-100 btn btn-outline-purple">Salvar</button>
        </form>
    </div>

    <script>
        function calcularTroco() {
            // Obtém os valores dos campos
            var valorBoleto = parseFloat(document.getElementById("ValorBoleto").value) || 0;
            var valorPago = parseFloat(document.getElementById("ValorPago").value) || 0;

            // Calcula o troco
            var troco = valorPago - valorBoleto;

            if (troco < 0) 
            {
               alert("Valor pago pelo cliente menor que o valor do boleto! ")
            }

            // Atualiza o campo "Troco do cliente"
            document.getElementById("TrocoCliente").value = troco.toFixed(2);
        }
    </script>
</div> 

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}
